import{r as D,j as t,aD as M,ad as ee,ao as h,aq as re,av as $,O as R,Q as v,ab as le,aE as O,aF as te,ae as ne,aG as ae,am as oe}from"./vendor-0e720bfc.js";import{b as ie,I as T}from"./index-34a8f856.js";import{g as ce,u as se}from"./index-aab34613.js";import{u as ue,a as w}from"./index-09ba12ff.js";import{u as de}from"./useRequest-760fa7d9.js";import{P as B}from"./index-53ad0c6f.js";import{P}from"./index-35224c64.js";import"./throttle-fe19b4d4.js";import"./index-45d4ede2.js";import"./AntdIcon-76890c80.js";import"./index-ac8d7459.js";import"./index-f8dcf536.js";import"./relativeTime-5abd1bf9.js";var fe=function(l){return l===document||l===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):l.scrollTop},he=function(l){return l.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},ge=function(l){return l.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},S=globalThis&&globalThis.__assign||function(){return S=Object.assign||function(c){for(var l,e=1,a=arguments.length;e<a;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(c[o]=l[o])}return c},S.apply(this,arguments)},me=globalThis&&globalThis.__awaiter||function(c,l,e,a){function o(r){return r instanceof e?r:new e(function(i){i(r)})}return new(e||(e=Promise))(function(r,i){function s(u){try{n(a.next(u))}catch(m){i(m)}}function d(u){try{n(a.throw(u))}catch(m){i(m)}}function n(u){u.done?r(u.value):o(u.value).then(s,d)}n((a=a.apply(c,l||[])).next())})},ve=globalThis&&globalThis.__generator||function(c,l){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,o,r,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(n){return function(u){return d([n,u])}}function d(n){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,o&&(r=n[0]&2?o.return:n[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,o=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){e.label=n[1];break}if(n[0]===6&&e.label<r[1]){e.label=r[1],r=n;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(n);break}r[2]&&e.ops.pop(),e.trys.pop();continue}n=l.call(c,e)}catch(u){n=[6,u],o=0}finally{a=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},p=globalThis&&globalThis.__read||function(c,l){var e=typeof Symbol=="function"&&c[Symbol.iterator];if(!e)return c;var a=e.call(c),o,r=[],i;try{for(;(l===void 0||l-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return r},j=globalThis&&globalThis.__spreadArray||function(c,l,e){if(e||arguments.length===2)for(var a=0,o=l.length,r;a<o;a++)(r||!(a in l))&&(r||(r=Array.prototype.slice.call(l,0,a)),r[a]=l[a]);return c.concat(r||Array.prototype.slice.call(l))},ye=function(l,e){e===void 0&&(e={});var a=e.target,o=e.isNoMore,r=e.threshold,i=r===void 0?100:r,s=e.reloadDeps,d=s===void 0?[]:s,n=e.manual,u=e.onBefore,m=e.onSuccess,x=e.onError,A=e.onFinally,V=p(D.useState(),2),b=V[0],H=V[1],Y=p(D.useState(!1),2),k=Y[0],E=Y[1],F=D.useMemo(function(){return o?o(b):!1},[b]),_=de(function(g){return me(void 0,void 0,void 0,function(){var f;return ve(this,function(y){switch(y.label){case 0:return[4,l(g)];case 1:return f=y.sent(),H(g?S(S({},f),{list:j(j([],p(g.list),!1),p(f.list),!1)}):f),[2,f]}})})},{manual:n,onFinally:function(f,y,L){E(!1),A==null||A(y,L)},onBefore:function(){return u==null?void 0:u()},onSuccess:function(f){setTimeout(function(){q()}),m==null||m(f)},onError:function(f){return x==null?void 0:x(f)}}),N=_.loading,I=_.run,C=_.runAsync,U=_.cancel,G=function(){F||(E(!0),I(b))},W=function(){return F?Promise.reject():(E(!0),C(b))},Z=function(){return I()},J=function(){return C()},q=function(){var f=ce(a);if(f){var y=fe(f),L=he(f),X=ge(f);L-y<=X+i&&G()}};return se("scroll",function(){N||k||q()},{target:a}),ue(function(){I()},j([],p(d),!1)),{data:b,loading:!k&&N,loadingMore:k,noMore:F,loadMore:w(G),loadMoreAsync:w(W),reload:w(Z),reloadAsync:w(J),mutate:H,cancel:U}};const be=ye,{CheckableTag:K}=M;function pe({disabled:c,label:l,value:e,isSelected:a=!1,onClick:o}){return c?a?t(K,{checked:a,children:l},e):t(M,{style:{border:"none",paddingInline:8},children:l},e):t(K,{checked:a,onChange:()=>o==null?void 0:o(e,{label:l,value:e}),children:l},e)}function Me({disabled:c,items:l=[],value:e=[],onChange:a,renderItem:o,size:r="small"}){const i=s=>{if(c)return;let d=e;e.includes(s)?d=e.filter(u=>u!==s):d=[...e,s];const n=l.filter(u=>d.includes(u.value));a==null||a(d,n)};return t(ee,{size:r,wrap:!0,children:l.map((s,d)=>o&&typeof o=="function"?o({disabled:c,isSelected:e.indexOf(s.value)>-1,label:s.label,value:s.value,onClick:()=>i(s.value)}):t(pe,{disabled:c,isSelected:e.includes(s.value),label:s.label,value:s.value,onClick:i},d))})}const{Text:_e}=ae,{useToken:we}=le,Q=4;function je(){const[c]=B.useForm(),{token:l}=we(),{data:e,loading:a,loadMore:o,loadingMore:r,reload:i}=be(async d=>{const n=d?Math.ceil(d.list.length/Q)+1:1,u=c.getFieldsValue();return{list:await ie({PageSize:Q,PageNumber:n,...u}),total:20}}),s=e&&e.list.length<e.total;return h(re,{children:[t($,{bordered:!1,children:h(B,{disabled:a,submitter:!1,form:c,layout:"horizontal",initialValues:{types:["2","3","4","12","13"],owner:["2","3"]},onValuesChange:i,children:[t(B.Item,{name:"types",label:"所有类型",children:t(Me,{disabled:a,items:[{label:"类型一",value:"1"},{label:"类型二",value:"2"},{label:"类型三",value:"3"},{label:"类型四",value:"4"},{label:"类型五",value:"5"},{label:"类型六",value:"6"},{label:"类型七",value:"7"},{label:"类型八",value:"8"},{label:"类型九",value:"9"},{label:"类型十",value:"10"},{label:"类型十一",value:"11"},{label:"类型十二",value:"12"},{label:"类型十三",value:"13"},{label:"类型十四",value:"14"},{label:"类型十五",value:"15"}]})}),h(R,{gutter:20,align:"middle",style:{marginBottom:l.controlHeightSM},children:[t(v,{children:t(P,{label:"owner",name:"owner",mode:"multiple",formItemProps:{style:{minWidth:"10rem",marginBottom:0}},options:[{label:"我自己",value:"1"},{label:"吴家豪",value:"2"},{label:"周星星",value:"3"},{label:"赵丽颖",value:"4"},{label:"姚明",value:"5"},{label:"张三",value:"6"},{label:"李四",value:"7"}]})}),t(v,{children:t("a",{onClick:()=>{c.setFieldsValue({owner:["1"]})},children:"只看自己的"})})]}),h(R,{gutter:20,style:{marginBottom:`-${l.controlHeightSM}px`},children:[t(v,{children:t(P,{placeholder:"不限",label:"活跃用户",name:"activeuser",options:[{label:"张三",value:"zhangsan"}]})}),t(v,{children:t(P,{placeholder:"不限",label:"好评度",name:"praise",options:[{label:"优秀",value:"ok"}]})})]})]})}),t($,{bordered:!1,style:{marginTop:16},children:t(Te,{data:e==null?void 0:e.list,loading:a,loadMore:o,loadingMore:r,hasMore:s})})]})}const z=({type:c,text:l})=>{switch(c){case"star-o":return h("span",{children:[t(T,{type:"StarOutlined",style:{marginRight:8}}),l]});case"like-o":return h("span",{children:[t(T,{type:"LikeOutlined",style:{marginRight:8}}),l]});case"message":return h("span",{children:[t(T,{type:"MessageOutlined",style:{marginRight:8}}),l]});default:return null}};function Te({loading:c,data:l=[],loadMore:e,loadingMore:a,hasMore:o}){return t(O,{size:"large",loading:c,rowKey:"id",itemLayout:"vertical",loadMore:o?t("div",{style:{textAlign:"center",marginTop:16},children:t(oe,{onClick:e,style:{paddingLeft:48,paddingRight:48},children:a?h("span",{children:[t(T,{type:"LoadingOutlined"})," 加载中..."]}):"加载更多"})}):t("span",{children:"No more data"}),dataSource:l,renderItem:i=>h(O.Item,{actions:[t(z,{type:"star-o",text:i.star},"star"),t(z,{type:"like-o",text:i.like},"like"),t(z,{type:"message",text:i.message},"message")],extra:t("div",{style:{width:272,height:1}}),children:[t(O.Item.Meta,{title:t("a",{href:i.href,children:i.title}),description:h("span",{children:[t(M,{children:"Ant Design"}),t(M,{children:"设计语言"}),t(M,{children:"蚂蚁金服"})]})}),t(_e,{children:i.content}),h(R,{gutter:20,style:{paddingTop:"16px"},children:[h(v,{children:[t(te,{src:i.avatar,size:"small"}),t("a",{href:i.href,style:{paddingLeft:10},children:i.owner})]}),h(v,{children:["发布在 ",t("a",{href:i.href,children:i.href})]}),t(v,{children:t("em",{children:ne(i.updatedAt).format("YYYY-MM-DD HH:mm")})})]})]},i.id)})}export{je as default};
