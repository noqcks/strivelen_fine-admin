import{r as u,aH as c,ao as l,j as t,am as n,ab as m,aI as p,aJ as h}from"./vendor-0e720bfc.js";import{c as g,I as i,g as f}from"./index-bfe558ba.js";import{s as b}from"./styled-components.browser.esm-7dc2a07b.js";import{P as x,M as P}from"./Table-d7866c4c.js";import{P as y}from"./index-9fb95036.js";import{a as T,P as I}from"./index-b3379533.js";import{P as F}from"./index-35224c64.js";import"./index-53ad0c6f.js";import"./index-45d4ede2.js";import"./AntdIcon-76890c80.js";import"./index-ac8d7459.js";import"./index-3129656e.js";import"./index-f8dcf536.js";import"./throttle-fe19b4d4.js";import"./relativeTime-5abd1bf9.js";import"./index-02d93196.js";const{useToken:w}=m,C=async(e,r,o)=>{const a={...e,pageNumber:e.current,isASC:Object.values(r)[0]==="ascend",name:Object.keys(r)[0]||"ID"};delete a.current;const{List:s,VirtualCount:d}=await f(a);return{data:s,success:!0,total:d}},k=[{title:"规则名称",dataIndex:"name",tip:"规则名称是唯一的 key"},{title:"描述",dataIndex:"desc",valueType:"textarea"},{title:"服务调用次数",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:e=>`${e}万`},{title:"状态",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"关闭",status:"Default"},1:{text:"运行中",status:"Processing"},2:{text:"已上线",status:"Success"},3:{text:"异常",status:"Error"}}},{title:"上次调度时间",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:(e,{defaultRender:r,...o},a)=>{const s=a.getFieldValue("status");return`${s}`=="0"?!1:`${s}`=="3"?t(p,{...o,placeholder:"请输入异常原因！"}):r(e)}},{title:"操作",dataIndex:"option",valueType:"option",render:(e,r)=>[t("a",{children:"配置"},"config"),t("a",{href:"https://procomponents.ant.design/",children:"订阅警报"},"subscribeAlert")]}],v=b.div`
  .ant-pro-table-search,
  .ant-pro-card {
    background-color: ${e=>e.theme.bg};
  }
  .ant-pro-table-list-toolbar-title,
  .ant-pro-table-list-toolbar-setting-item {
    color: ${e=>e.theme.textColor};
  }
`;function J(){const{token:e}=w(),r=u.useRef(),[o,a]=c.useModal();return l(v,{theme:{bg:e.colorBgContainer,textColor:e.colorText},children:[t(x,{columns:k,headerTitle:"查询表格",actionRef:r,rowKey:"key",cardBordered:!0,search:{labelWidth:120},pagination:{defaultPageSize:g.pageSize},toolBarRender:()=>[t(n,{type:"primary",icon:t(i,{type:"DownloadOutlined"}),onClick:()=>{o.warning({centered:!0,title:"请自行添加事件"})},children:"导出PDF"},"down_pdf"),t(A,{},"add_rule")],request:C}),a]})}function A(){const[e]=h.useForm();return l(P,{layout:"horizontal",labelCol:{span:5},wrapperCol:{span:19},grid:!1,rowProps:{gutter:16},title:"新增",form:e,modalProps:{title:"新增规则",destroyOnClose:!0,width:560},trigger:l(n,{type:"primary",children:[t(i,{type:"PlusOutlined"}),"新建"]}),submitTimeout:2e3,onFinish:async r=>(await new Promise(o=>setTimeout(o,1e3)),console.log(r),!0),children:[t(y,{width:"md",label:"规则名称",name:"name",colProps:{span:16},rules:[{required:!0,message:"请输入规则名称"}],placeholder:"请输入规则名称"}),t(T,{label:"调用次数",name:"callNo",rules:[{required:!0,message:"请输入调用次数"}],placeholder:"请输入调用次数",addonAfter:"万次"}),t(F,{width:"sm",colProps:{span:12},label:"状态",name:"status",placeholder:"请输入描述信息",options:[{label:"进行中",value:"1"}],rules:[{required:!0,message:"请选择状态"}]}),t(I,{colProps:{span:24},label:"描述",name:"desc",placeholder:"请输入描述信息"})]})}export{J as default};
