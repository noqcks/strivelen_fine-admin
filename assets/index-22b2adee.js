import{au as s,aK as M,r as c,aa as ve,j as C,am as Ie,aA as Pe,bP as en,bQ as rn,bR as nn,bS as tn,bT as an,as as k,ao as le,aP as ae,bj as re,bn as lr,aY as on,bp as ln,aw as un,ae as xe,bg as de,bh as K,bU as sn,bV as Rr,bW as dn,bX as cn,aN as $e,aL as fn,bi as ze,aO as vn,bY as mn,bZ as xr,b_ as pn,b$ as gn,at as ce,O as hn,Q as yn,aB as ur,V as He,aJ as pe,aq as Ze,ad as Cn}from"./vendor-1a382111.js";import{u as Fe,a as Oe,_ as We,b as bn,P as Sr,C as Pn}from"./index-6efb831b.js";import{A as Te}from"./AntdIcon-127956e0.js";var wn=function(e){return M({},e.componentCls,{display:"flex",justifyContent:"space-between",paddingBlock:16,paddingInlineStart:8,paddingInlineEnd:16,borderBlockStart:"1px solid ".concat(e.colorSplit)})};function Rn(n){return Fe("DropdownFooter",function(e){var r=s(s({},e),{},{componentCls:".".concat(n)});return[wn(r)]})}var xn=function(e){var r=Oe(),t=e.onClear,a=e.onConfirm,i=e.disabled,o=e.footerRender,l=c.useContext(ve.ConfigContext),p=l.getPrefixCls,u=p("pro-core-dropdown-footer"),g=Rn(u),f=g.wrapSSR,d=g.hashId,v=[C(Ie,{style:{visibility:t?"visible":"hidden"},type:"link",size:"small",disabled:i,onClick:function(m){t&&t(m),m.stopPropagation()},children:r.getMessage("form.lightFilter.clear","清除")},"clear"),C(Ie,{"data-type":"confirm",type:"primary",size:"small",onClick:a,disabled:i,children:r.getMessage("form.lightFilter.confirm","确认")},"confirm")];if(o===!1||(o==null?void 0:o(a,t))===!1)return null;var h=(o==null?void 0:o(a,t))||v;return f(C("div",{className:Pe(u,d),onClick:function(m){return m.target.getAttribute("data-type")!=="confirm"&&m.stopPropagation()},children:h}))},Fr=function(e,r){return C(Te,{...s(s({},e),{},{ref:r,icon:en})})};Fr.displayName="CloseOutlined";const Sn=c.forwardRef(Fr);var Ar=function(e,r){return C(Te,{...s(s({},e),{},{ref:r,icon:rn})})};Ar.displayName="CopyOutlined";const Ir=c.forwardRef(Ar);var _r=function(e,r){return C(Te,{...s(s({},e),{},{ref:r,icon:nn})})};_r.displayName="DeleteOutlined";const $r=c.forwardRef(_r);var Or=function(e,r){return C(Te,{...s(s({},e),{},{ref:r,icon:tn})})};Or.displayName="DownOutlined";const Fn=c.forwardRef(Or);var Tr=function(e,r){return C(Te,{...s(s({},e),{},{ref:r,icon:an})})};Tr.displayName="PlusOutlined";const An=c.forwardRef(Tr);var In=function(e){var r,t;return M({},e.componentCls,{display:"inline-flex",gap:"4px",alignItems:"center",height:"30px",paddingBlock:0,paddingInline:8,fontSize:e.fontSize,lineHeight:"30px",borderRadius:"2px",cursor:"pointer","&:hover":{backgroundColor:"rgba(0,0,0,0.1)"},"*":{boxSizing:"border-box"},"&-active":M({paddingBlock:0,paddingInline:12,backgroundColor:"rgba(0,0,0,0.04)"},"&".concat(e.componentCls,"-allow-clear:hover:not(").concat(e.componentCls,"-disabled)"),(r={},M(r,"".concat(e.componentCls,"-arrow"),{display:"none"}),M(r,"".concat(e.componentCls,"-close"),{display:"inline-flex"}),r)),"&-icon":M({height:"12px",paddingBlock:1,paddingInline:1,color:e.colorIcon,fontSize:"12px",verticalAlign:"middle"},"&".concat(e.componentCls,"-close"),{display:"none",height:14,alignItems:"center",justifyContent:"center",width:14,color:e.colorBgContainer,fontSize:8,backgroundColor:e.colorTextPlaceholder,borderRadius:"50%","&:hover":{color:e.colorIcon}}),"&-disabled":M({color:e.colorTextPlaceholder,cursor:"not-allowed"},"".concat(e.componentCls,"-icon"),{color:e.colorTextPlaceholder}),"&-small":(t={height:"24px",paddingBlock:0,paddingInline:4,fontSize:e.fontSizeSM,lineHeight:"24px"},M(t,"&".concat(e.componentCls,"-active"),{paddingBlock:0,paddingInline:8}),M(t,"".concat(e.componentCls,"-icon"),{paddingBlock:0,paddingInline:0}),M(t,"".concat(e.componentCls,"-close"),{marginBlockStart:"-2px",paddingBlock:4,paddingInline:4,fontSize:"6px"}),t),"&-bordered":{height:"32px",paddingBlock:0,paddingInline:12,border:"".concat(e.lineWidth," solid ").concat(e.colorBorder),borderRadius:"@border-radius-base"},"&-bordered&-small":{height:"24px",paddingBlock:0,paddingInline:8},"&-bordered&-active":{backgroundColor:e.colorBgContainer}})};function _n(n){return Fe("FieldLabel",function(e){var r=s(s({},e),{},{componentCls:".".concat(n)});return[In(r)]})}var $n=function(e,r){var t,a=e.label,i=e.onClear,o=e.value,l=e.size,p=l===void 0?"middle":l,u=e.disabled,g=e.onLabelClick,f=e.ellipsis,d=e.placeholder,v=e.className,h=e.formatter,y=e.bordered,m=e.allowClear,b=m===void 0?!0:m,_=c.useContext(ve.ConfigContext),S=_.getPrefixCls,P=S("pro-core-field-label"),N=_n(P),T=N.wrapSSR,U=N.hashId,D=Oe(),L=c.useRef(null),z=c.useRef(null);c.useImperativeHandle(r,function(){return{labelRef:z,clearRef:L}});var G=function(O){return h?h(O):Array.isArray(O)?O.join(","):O},j=function(O,A){if(A!=null&&A!==""&&(!Array.isArray(A)||A.length)){var I,$,F=O?le("span",{onClick:g,className:"".concat(P,"-text"),children:[O,": "]}):"",w=G(A);if(!f)return le("span",{style:{display:"inline-flex",alignItems:"center"},children:[F,G(A)]});var E=41,x=function(){var q=Array.isArray(A)&&A.length>1,Q=D.getMessage("form.lightFilter.itemUnit","项");return typeof w=="string"&&w.length>E&&q?"...".concat(A.length).concat(Q):""},R=x();return le("span",{title:typeof w=="string"?w:void 0,style:{display:"inline-flex",alignItems:"center"},children:[F,C("span",{style:{paddingInlineStart:4},children:typeof w=="string"?w==null||(I=w.toString())===null||I===void 0||($=I.substr)===null||$===void 0?void 0:$.call(I,0,E):w}),R]})}return O||d};return T(le("span",{className:Pe(P,U,"".concat(P,"-").concat(p),(t={},M(t,"".concat(P,"-active"),!!o||o===0),M(t,"".concat(P,"-disabled"),u),M(t,"".concat(P,"-bordered"),y),M(t,"".concat(P,"-allow-clear"),b),t),v),ref:z,children:[j(a,o),(o||o===0)&&b&&C(Sn,{role:"button",title:"清除",className:Pe("".concat(P,"-icon"),U,"".concat(P,"-close")),onClick:function(O){i&&!u&&i(),O.stopPropagation()},ref:L}),C(Fn,{className:Pe("".concat(P,"-icon"),"".concat(P,"-arrow"))})]}))},On=k.forwardRef($n),Tn=function(e){var r;return r={},M(r,"".concat(e.componentCls,"-label"),{cursor:"pointer"}),M(r,"".concat(e.componentCls,"-overlay"),{minWidth:"200px",marginBlockStart:"4px","*":{fontFamily:e.fontFamily,boxSizing:"border-box"}}),M(r,"".concat(e.componentCls,"-content"),{paddingBlock:16,paddingInline:16}),r};function En(n){return Fe("FilterDropdown",function(e){var r=s(s({},e),{},{componentCls:".".concat(n)});return[Tn(r)]})}var ke=function(e){var r={};if(Object.keys(e||{}).forEach(function(t){e[t]!==void 0&&(r[t]=e[t])}),!(Object.keys(r).length<1))return r},Nn=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,sr=function(e){return e==="*"||e==="x"||e==="X"},dr=function(e){var r=parseInt(e,10);return isNaN(r)?e:r},Mn=function(e,r){return re(e)!==re(r)?[String(e),String(r)]:[e,r]},Vn=function(e,r){if(sr(e)||sr(r))return 0;var t=Mn(dr(e),dr(r)),a=ae(t,2),i=a[0],o=a[1];return i>o?1:i<o?-1:0},Dn=function(e,r){for(var t=0;t<Math.max(e.length,r.length);t++){var a=Vn(e[t]||"0",r[t]||"0");if(a!==0)return a}return 0},cr=function(e){var r,t=e.match(Nn);return t==null||(r=t.shift)===null||r===void 0||r.call(t),t},Bn=function(e,r){var t=cr(e),a=cr(r),i=t.pop(),o=a.pop(),l=Dn(t,a);return l!==0?l:i||o?i?-1:1:0},Ln=function(){var e,r;return typeof process>"u"?lr:((e=process)===null||e===void 0||(r=e.env)===null||r===void 0?void 0:r.ANTD_VERSION)||lr},jn=function(e,r){var t=Bn(Ln(),"4.23.0")>-1?{open:e,onOpenChange:r}:{visible:e,onVisibleChange:r};return ke(t)},Wn=function(e){var r=e.children,t=e.label,a=e.footer,i=e.open,o=e.onOpenChange,l=e.disabled,p=e.onVisibleChange,u=e.visible,g=e.footerRender,f=e.placement,d=c.useContext(ve.ConfigContext),v=d.getPrefixCls,h=v("pro-core-field-dropdown"),y=En(h),m=y.wrapSSR,b=y.hashId,_=jn(i||u||!1,o||p);return m(C(on,s(s({placement:f,trigger:["click"]},_),{},{overlayInnerStyle:{padding:0},content:le("div",{className:"".concat(h,"-overlay ").concat(h,"-overlay-").concat(f," ").concat(b),children:[C("div",{className:"".concat(h,"-content ").concat(b),children:r}),a&&C(xn,s({disabled:l,footerRender:g},a))]}),children:C("span",{className:"".concat(h,"-label ").concat(b),children:t})})))},Er=k.createContext({}),er={};Object.defineProperty(er,"__esModule",{value:!0});var rr=er.default=Un;function Un(n,e){for(var r=n,t=0;t<e.length;t+=1){if(r==null)return;r=r[e[t]]}return r}var Me=function(e){return e==null},Nr={exports:{}};(function(n,e){(function(r,t){n.exports=t()})(ln,function(){var r="month",t="quarter";return function(a,i){var o=i.prototype;o.quarter=function(u){return this.$utils().u(u)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(u-1))};var l=o.add;o.add=function(u,g){return u=Number(u),this.$utils().p(g)===t?this.add(3*u,r):l.bind(this)(u,g)};var p=o.startOf;o.startOf=function(u,g){var f=this.$utils(),d=!!f.u(g)||g;if(f.p(u)===t){var v=this.quarter()-1;return d?this.month(3*v).startOf(r).startOf("day"):this.month(3*v+2).endOf(r).endOf("day")}return p.bind(this)(u,g)}}})})(Nr);var qn=Nr.exports;const Yn=un(qn);xe.extend(Yn);var Mr={time:"HH:mm:ss",timeRange:"HH:mm:ss",date:"YYYY-MM-DD",dateWeek:"YYYY-wo",dateMonth:"YYYY-MM",dateQuarter:"YYYY-[Q]Q",dateYear:"YYYY",dateRange:"YYYY-MM-DD",dateTime:"YYYY-MM-DD HH:mm:ss",dateTimeRange:"YYYY-MM-DD HH:mm:ss"};function fr(n){return Object.prototype.toString.call(n)==="[object Object]"}function zn(n){if(fr(n)===!1)return!1;var e=n.constructor;if(e===void 0)return!0;var r=e.prototype;return!(fr(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)}var Ge=function(e){return!!(e!=null&&e._isAMomentObject)},vr=function(e,r,t){if(!r)return e;if(xe.isDayjs(e)||Ge(e)){if(r==="number")return e.valueOf();if(r==="string")return e.format(Mr[t]||"YYYY-MM-DD HH:mm:ss");if(typeof r=="string"&&r!=="string")return e.format(r);if(typeof r=="function")return r(e,t)}return e},Hn=function n(e,r,t,a,i){var o={};return typeof window>"u"||re(e)!=="object"||Me(e)||e instanceof Blob||Array.isArray(e)?e:(Object.keys(e).forEach(function(l){var p=i?[i,l].flat(1):[l],u=rr(t,p)||"text",g="text",f;typeof u=="string"?g=u:u&&(g=u.valueType,f=u.dateFormat);var d=e[l];if(!(Me(d)&&a)){if(zn(d)&&!Array.isArray(d)&&!xe.isDayjs(d)&&!Ge(d)){o[l]=n(d,r,t,a,[l]);return}if(Array.isArray(d)){o[l]=d.map(function(v,h){return xe.isDayjs(v)||Ge(v)?vr(v,f||r,g):n(v,r,t,a,[l,"".concat(h)])});return}o[l]=vr(d,f||r,g)}}),o)},mr=function(e,r){return typeof r=="function"?r(xe(e)):xe(e).format(r)},kn=function(e,r){var t=Array.isArray(e)?e:[],a=ae(t,2),i=a[0],o=a[1],l,p;Array.isArray(r)?(l=r[0],p=r[1]):(l=r,p=r);var u=i?mr(i,l):"",g=o?mr(o,p):"",f=u&&g?"".concat(u," ~ ").concat(g):"";return f};function Vr(n){if(typeof n=="function"){for(var e=arguments.length,r=new Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return n.apply(void 0,r)}return n}var Dr=function(e){var r=c.useRef(null);return r.current=e,c.useCallback(function(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=r.current)===null||t===void 0?void 0:t.call.apply(t,[r].concat(i))},[])};function Ne(n,e,r,t){if(n===e)return!0;if(n&&e&&re(n)==="object"&&re(e)==="object"){if(n.constructor!==e.constructor)return!1;var a,i,o;if(Array.isArray(n)){if(a=n.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!Ne(n[i],e[i],r,t))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;var l=We(n.entries()),p;try{for(l.s();!(p=l.n()).done;)if(i=p.value,!e.has(i[0]))return!1}catch(h){l.e(h)}finally{l.f()}var u=We(n.entries()),g;try{for(u.s();!(g=u.n()).done;)if(i=g.value,!Ne(i[1],e.get(i[0]),r,t))return!1}catch(h){u.e(h)}finally{u.f()}return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;var f=We(n.entries()),d;try{for(f.s();!(d=f.n()).done;)if(i=d.value,!e.has(i[0]))return!1}catch(h){f.e(h)}finally{f.f()}return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(a=n.length,a!=e.length)return!1;for(i=a;i--!==0;)if(n[i]!==e[i])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&n.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&n.toString)return n.toString()===e.toString();if(o=Object.keys(n),a=o.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[i]))return!1;for(i=a;i--!==0;){var v=o[i];if(!(r!=null&&r.includes(v))&&!(v==="_owner"&&n.$$typeof)&&!Ne(n[v],e[v],r,t))return t&&console.log(v),!1}return!0}return n!==n&&e!==e}var Ue=0;function Gn(n){var e=c.useState(function(){return n.proFieldKey?n.proFieldKey.toString():(Ue+=1,Ue.toString())}),r=ae(e,1),t=r[0],a=c.useRef(t),i=function(){var u=de(K().mark(function g(){var f,d;return K().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(f=n.request)===null||f===void 0?void 0:f.call(n,n.params,n);case 2:return d=h.sent,h.abrupt("return",d);case 4:case"end":return h.stop()}},g)}));return function(){return u.apply(this,arguments)}}();c.useEffect(function(){return function(){Ue+=1}},[]);var o=bn([a.current,n.params],i,{revalidateOnFocus:!1,shouldRetryOnError:!1,revalidateOnReconnect:!1}),l=o.data,p=o.error;return[l||p]}var Kn=function(e){var r=c.useRef();return c.useEffect(function(){r.current=e}),r.current},Qn=function(e){var r=!1;return(typeof e=="string"&&e.startsWith("date")&&!e.endsWith("Range")||e==="select"||e==="time")&&(r=!0),r},Jn=function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];for(var i=t.length,o,l=0;l<i;l+=1)for(o in t[l])t[l].hasOwnProperty(o)&&(re(e[o])==="object"&&re(t[l][o])==="object"&&e[o]!==void 0&&e[o]!==null&&!Array.isArray(e[o])&&!Array.isArray(t[l][o])?e[o]=s(s({},e[o]),t[l][o]):e[o]=t[l][o]);return e},pr=0,gr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:21;if(typeof window>"u"||!window.crypto)return(pr+=1).toFixed(0);for(var r="",t=crypto.getRandomValues(new Uint8Array(e));e--;){var a=63&t[e];r+=a<36?a.toString(36):a<62?(a-26).toString(36).toUpperCase():a<63?"_":"-"}return r},Br=function(){return typeof window>"u"?gr():window.crypto&&window.crypto.randomUUID&&typeof crypto.randomUUID=="function"?crypto.randomUUID():gr()},Lr={},jr={exports:{}},Wr={exports:{}};(function(n){var e=sn();function r(t){if(Array.isArray(t))return e(t)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Wr);var Xn=Wr.exports,Ur={exports:{}};(function(n){function e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Ur);var qr=Ur.exports,Yr={exports:{}};(function(n){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Yr);var Zn=Yr.exports;(function(n){var e=Xn,r=qr,t=Rr(),a=Zn;function i(o){return e(o)||r(o)||t(o)||a()}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(jr);var et=jr.exports,zr={exports:{}};(function(n){var e=dn(),r=qr,t=Rr(),a=cn();function i(o){return e(o)||r(o)||t(o)||a()}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(zr);var rt=zr.exports,Be=$e.default;Object.defineProperty(Lr,"__esModule",{value:!0});var ge=Lr.default=it,nt=Be(fn()),tt=Be(et),at=Be(rt),ot=Be(er);function Hr(n,e,r,t){if(!e.length)return r;var a=(0,at.default)(e),i=a[0],o=a.slice(1),l;return!n&&typeof i=="number"?l=[]:Array.isArray(n)?l=(0,tt.default)(n):l=(0,nt.default)({},n),t&&r===void 0&&o.length===1?delete l[i][o[0]]:l[i]=Hr(l[i],o,r,t),l}function it(n,e,r){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&t&&r===void 0&&!(0,ot.default)(n,e.slice(0,-1))?n:Hr(n,e,r,t)}function lt(n){return re(n)!=="object"?!1:n===null?!0:!(k.isValidElement(n)||n.constructor===RegExp||n instanceof Map||n instanceof Set||n instanceof HTMLElement||n instanceof Blob||n instanceof File||Array.isArray(n))}var ut=function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Object.keys(r).reduce(function(l,p){var u=r[p];return Me(u)||(l[p]=u),l},{});if(Object.keys(a).length<1||typeof window>"u"||re(e)!=="object"||Me(e)||e instanceof Blob)return e;var i=Array.isArray(e)?[]:{},o=function l(p,u){var g=Array.isArray(p),f=g?[]:{};return p==null||p===void 0?f:(Object.keys(p).forEach(function(d){var v=u?[u,d].flat(1):[d].flat(1),h=p[d],y=rr(a,v),m=function S(P){return Array.isArray(P)&&P.forEach(function(N,T){N&&(typeof N=="function"&&(h[T]=N(h,d,p)),re(N)==="object"&&!Array.isArray(N)&&Object.keys(N).forEach(function(U){if(typeof N[U]=="function"){var D=N[U](p[d][T][U],d,p);h[T][U]=re(D)==="object"?D[U]:D}}),re(N)==="object"&&Array.isArray(N)&&S(N))}),d},b=function(){var P=typeof y=="function"?y==null?void 0:y(h,d,p):m(y);if(Array.isArray(P)){f=ge(f,P,h);return}re(P)==="object"&&!Array.isArray(i)?i=s(s({},i),P):re(P)==="object"&&Array.isArray(i)?f=s(s({},f),P):P&&(f=ge(f,[P],h))};if(y&&typeof y=="function"&&b(),!(typeof window>"u")){if(lt(h)){var _=l(h,v);if(Object.keys(_).length<1)return;f=ge(f,[d],_);return}b()}}),t?f:p)};return i=Array.isArray(e)&&Array.isArray(i)?ze(o(e)):Jn({},o(e),i),i},kr={},Gr={exports:{}};(function(n){var e=vn.default;function r(a){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(r=function(p){return p?o:i})(a)}function t(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||e(a)!=="object"&&typeof a!="function")return{default:a};var o=r(i);if(o&&o.has(a))return o.get(a);var l={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in a)if(u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)){var g=p?Object.getOwnPropertyDescriptor(a,u):null;g&&(g.get||g.set)?Object.defineProperty(l,u,g):l[u]=a[u]}return l.default=a,o&&o.set(a,l),l}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Gr);var Le=Gr.exports,nr={},st=Le.default;Object.defineProperty(nr,"__esModule",{value:!0});nr.default=dt;var hr=st(c);function dt(n){var e=hr.useRef();e.current=n;var r=hr.useCallback(function(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.current)===null||t===void 0?void 0:t.call.apply(t,[e].concat(i))},[]);return r}var Se={},ct=$e.default,ft=Le.default;Object.defineProperty(Se,"__esModule",{value:!0});Se.useLayoutUpdateEffect=Se.default=void 0;var Ke=ft(c),vt=ct(mn()),Qe=(0,vt.default)()?Ke.useLayoutEffect:Ke.useEffect,mt=Qe;Se.default=mt;var pt=function(e,r){var t=Ke.useRef(!0);Qe(function(){if(!t.current)return e()},r),Qe(function(){return t.current=!1,function(){t.current=!0}},[])};Se.useLayoutUpdateEffect=pt;var tr={},gt=Le.default,ht=$e.default;Object.defineProperty(tr,"__esModule",{value:!0});tr.default=Ct;var yt=ht(xr()),qe=gt(c);function Ct(n){var e=qe.useRef(!1),r=qe.useState(n),t=(0,yt.default)(r,2),a=t[0],i=t[1];qe.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(l,p){p&&e.current||i(l)}return[a,o]}var Kr=Le.default,ar=$e.default;Object.defineProperty(kr,"__esModule",{value:!0});var Qr=kr.default=wt,Ee=ar(xr()),bt=Kr(c),yr=ar(nr),Cr=Kr(Se),Pt=ar(tr),fe;(function(n){n[n.INNER=0]="INNER",n[n.PROP=1]="PROP"})(fe||(fe={}));function Ye(n){return n!==void 0}function wt(n,e){var r=e||{},t=r.defaultValue,a=r.value,i=r.onChange,o=r.postState,l=(0,Pt.default)(function(){var m=void 0,b;return Ye(a)?(m=a,b=fe.PROP):Ye(t)?(m=typeof t=="function"?t():t,b=fe.PROP):(m=typeof n=="function"?n():n,b=fe.INNER),[m,b,m]}),p=(0,Ee.default)(l,2),u=p[0],g=p[1],f=Ye(a)?a:u[0],d=o?o(f):f;(0,Cr.useLayoutUpdateEffect)(function(){g(function(m){var b=(0,Ee.default)(m,1),_=b[0];return[a,fe.PROP,_]})},[a]);var v=bt.useRef(),h=(0,yr.default)(function(m,b){g(function(_){var S=(0,Ee.default)(_,3),P=S[0],N=S[1],T=S[2],U=typeof m=="function"?m(P):m;if(U===P)return _;var D=N===fe.INNER&&v.current!==T?T:P;return[U,fe.INNER,D]},b)}),y=(0,yr.default)(i);return(0,Cr.default)(function(){var m=(0,Ee.default)(u,3),b=m[0],_=m[1],S=m[2];b!==S&&_===fe.INNER&&(y(b,S),v.current=S)},[u]),[d,h]}var Ve=pn();function De(n,e){for(var r=Object.assign({},n),t=0;t<e.length;t+=1){var a=e[t];delete r[a]}return r}var Jr={},Rt=$e.default;Object.defineProperty(Jr,"__esModule",{value:!0});var xt=Jr.default=Je,St=Rt(c),Ft=gn;function Je(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return St.default.Children.forEach(n,function(t){t==null&&!e.keepEmpty||(Array.isArray(t)?r=r.concat(Je(t)):(0,Ft.isFragment)(t)&&t.props?r=r.concat(Je(t.props.children,e)):r.push(t))}),r}var Ae=globalThis&&globalThis.__assign||function(){return Ae=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Ae.apply(this,arguments)};function At(n){var e,r=(typeof window<"u"?window:{}).URL,t=new r((e=window==null?void 0:window.location)===null||e===void 0?void 0:e.href);return Object.keys(n).forEach(function(a){var i=n[a];i!=null?Array.isArray(i)?(t.searchParams.delete(a),i.forEach(function(o){t.searchParams.append(a,o)})):i instanceof Date?Number.isNaN(i.getTime())||t.searchParams.set(a,i.toISOString()):typeof i=="object"?t.searchParams.set(a,JSON.stringify(i)):t.searchParams.set(a,i):t.searchParams.delete(a)}),t}function It(n,e){var r;n===void 0&&(n={}),e===void 0&&(e={disabled:!1});var t=c.useState(),a=t[1],i=typeof window<"u"&&((r=window==null?void 0:window.location)===null||r===void 0?void 0:r.search),o=c.useMemo(function(){return e.disabled?{}:new URLSearchParams(i||{})},[e.disabled,i]),l=c.useMemo(function(){if(e.disabled)return{};if(typeof window>"u"||!window.URL)return{};var g=[];o.forEach(function(d,v){g.push({key:v,value:d})}),g=g.reduce(function(d,v){return(d[v.key]=d[v.key]||[]).push(v),d},{}),g=Object.keys(g).map(function(d){var v=g[d];return v.length===1?[d,v[0].value]:[d,v.map(function(h){var y=h.value;return y})]});var f=Ae({},n);return g.forEach(function(d){var v=d[0],h=d[1];f[v]=$t(v,h,{},n)}),f},[e.disabled,n,o]);function p(g){if(!(typeof window>"u"||!window.URL)){var f=At(g);window.location.search!==f.search&&window.history.replaceState({},"",f.toString()),o.toString()!==f.searchParams.toString()&&a({})}}c.useEffect(function(){e.disabled||typeof window>"u"||!window.URL||p(Ae(Ae({},n),l))},[e.disabled,l]);var u=function(g){p(g)};return c.useEffect(function(){if(e.disabled)return function(){};if(typeof window>"u"||!window.URL)return function(){};var g=function(){a({})};return window.addEventListener("popstate",g),function(){window.removeEventListener("popstate",g)}},[e.disabled]),[l,u]}var _t={true:!0,false:!1};function $t(n,e,r,t){if(!r)return e;var a=r[n],i=e===void 0?t[n]:e;return a===Number?Number(i):a===Boolean||e==="true"||e==="false"?_t[i]:Array.isArray(a)?a.find(function(o){return o==i})||t[n]:i}var Ot=k.createContext({});const Xr=Ot;var Tt=["children","Wrapper"],Et=["children","Wrapper"],Zr=c.createContext({grid:!1,colProps:void 0,rowProps:void 0}),Nt=function(e){var r=e.grid,t=e.rowProps,a=e.colProps;return{grid:!!r,RowWrapper:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=o.children,p=o.Wrapper,u=ce(o,Tt);return r?C(hn,s(s(s({gutter:8},t),u),{},{children:l})):p?C(p,{children:l}):l},ColWrapper:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=o.children,p=o.Wrapper,u=ce(o,Et),g=c.useMemo(function(){var f=s(s({},a),u);return typeof f.span>"u"&&typeof f.xs>"u"&&(f.xs=24),f},[u]);return r?C(yn,s(s({},g),{},{children:l})):p?C(p,{children:l}):l}}},or=function(e){var r=c.useMemo(function(){return re(e)==="object"?e:{grid:e}},[e]),t=c.useContext(Zr),a=t.grid,i=t.colProps;return c.useMemo(function(){return Nt({grid:!!(a||r.grid),rowProps:r==null?void 0:r.rowProps,colProps:(r==null?void 0:r.colProps)||i,Wrapper:r==null?void 0:r.Wrapper})},[r==null?void 0:r.Wrapper,r.grid,a,JSON.stringify([i,r==null?void 0:r.colProps,r==null?void 0:r.rowProps])])},Mt=k.createContext({mode:"edit"}),Vt=["creatorButtonProps","deleteIconProps","copyIconProps","itemContainerRender","itemRender","alwaysShowItemLabel","prefixCls","creatorRecord","action","actionGuard","children","actionRender","fields","meta","field","index","formInstance","originName","containerClassName","containerStyle","min","max","count"],Dt=function(e){return Array.isArray(e)?e:typeof e=="function"?[e]:xt(e)},Bt=function(e){var r;e.creatorButtonProps;var t=e.deleteIconProps,a=e.copyIconProps,i=e.itemContainerRender,o=e.itemRender,l=e.alwaysShowItemLabel,p=e.prefixCls;e.creatorRecord;var u=e.action;e.actionGuard;var g=e.children,f=e.actionRender,d=e.fields,v=e.meta,h=e.field,y=e.index,m=e.formInstance,b=e.originName,_=e.containerClassName,S=e.containerStyle,P=e.min,N=e.max,T=e.count,U=ce(e,Vt),D=c.useContext(Sr),L=D.hashId,z=c.useContext(_e),G=c.useRef(!1),j=c.useState(!1),B=ae(j,2),O=B[0],A=B[1],I=c.useState(!1),$=ae(I,2),F=$[0],w=$[1];c.useEffect(function(){return function(){G.current=!0}},[]);var E=function(){return m.getFieldValue([z.listName,b,y==null?void 0:y.toString()].flat(1).filter(function(J){return J!=null}))},x={getCurrentRowData:E,setCurrentRowData:function(J){var ee,Ce=(m==null||(ee=m.getFieldsValue)===null||ee===void 0?void 0:ee.call(m))||{},X=[z.listName,b,y==null?void 0:y.toString()].flat(1).filter(function(Y){return Y!=null}),H=ge(Ce,X,s(s({},E()),J||{}));return m.setFieldsValue(H)}},R=Dt(g).map(function(V){return typeof V=="function"?V==null?void 0:V(h,y,s(s({},u),x),T):V}).map(function(V,J){if(k.isValidElement(V)){var ee;return k.cloneElement(V,s({key:V.key||(V==null||(ee=V.props)===null||ee===void 0?void 0:ee.name)||J},(V==null?void 0:V.props)||{}))}return V}),W=c.useMemo(function(){if(a===!1||N===T)return null;var V=a.Icon,J=V===void 0?Ir:V,ee=a.tooltipText;return C(ur,{title:ee,children:C(He,{spinning:F,children:C(J,{className:"".concat(p,"-action-icon action-copy ").concat(L),onClick:function(){var Ce=de(K().mark(function H(){var Y;return K().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return w(!0),Y=m==null?void 0:m.getFieldValue([z.listName,b,h.name].filter(function(be){return be!==void 0}).flat(1)),ie.next=4,u.add(Y);case 4:w(!1);case 5:case"end":return ie.stop()}},H)}));function X(){return Ce.apply(this,arguments)}return X}()})})},"copy")},[a,N,T,F,p,L,m,z.listName,h.name,b,u]),q=c.useMemo(function(){if(t===!1||P===T)return null;var V=t.Icon,J=V===void 0?$r:V,ee=t.tooltipText;return C(ur,{title:ee,children:C(He,{spinning:O,children:C(J,{className:"".concat(p,"-action-icon action-remove ").concat(L),onClick:function(){var Ce=de(K().mark(function H(){return K().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return A(!0),Z.next=3,u.remove(h.name);case 3:G.current||A(!1);case 4:case"end":return Z.stop()}},H)}));function X(){return Ce.apply(this,arguments)}return X}()})})},"delete")},[t,P,T,O,p,L,u,h.name]),Q=c.useMemo(function(){return[W,q].filter(function(V){return V!=null})},[W,q]),ne=(f==null?void 0:f(h,u,Q,T))||Q,we=ne.length>0?C("div",{className:"".concat(p,"-action ").concat(L),children:ne}):null,ue={name:U.name,field:h,index:y,record:m==null||(r=m.getFieldValue)===null||r===void 0?void 0:r.call(m,[z.listName,b,h.name].filter(function(V){return V!==void 0}).flat(1)),fields:d,operation:u,meta:v},se=or(),oe=se.grid,he=(i==null?void 0:i(R,ue))||R,ye=(o==null?void 0:o({listDom:C("div",{className:"".concat(p,"-container ").concat(_," ").concat(L),style:s({width:oe?"100%":void 0},S),children:he}),action:we},ue))||le("div",{className:"".concat(p,"-item  ").concat(L," ").concat(l?"".concat(p,"-item-show-label ").concat(L):""),style:{display:"flex",alignItems:"flex-end"},children:[C("div",{className:"".concat(p,"-container ").concat(_," ").concat(L),style:s({width:oe?"100%":void 0},S),children:he}),we]});return C(_e.Provider,{value:s(s({},h),{},{listName:[z.listName,b,h.name].filter(function(V){return V!==void 0}).flat(1)}),children:ye})},Lt=function(e){var r=Oe(),t=e.creatorButtonProps,a=e.prefixCls,i=e.children,o=e.creatorRecord,l=e.action,p=e.fields,u=e.actionGuard,g=e.max,f=e.fieldExtraRender,d=e.meta,v=e.containerClassName,h=e.containerStyle,y=e.onAfterAdd,m=e.onAfterRemove,b=c.useContext(Sr),_=b.hashId,S=c.useRef(new Map),P=c.useState(!1),N=ae(P,2),T=N[0],U=N[1],D=c.useMemo(function(){return p.map(function(j){var B,O;if(!(!((B=S.current)===null||B===void 0)&&B.has(j.key.toString()))){var A;(A=S.current)===null||A===void 0||A.set(j.key.toString(),Br())}var I=(O=S.current)===null||O===void 0?void 0:O.get(j.key.toString());return s(s({},j),{},{uuid:I})})},[p]),L=c.useMemo(function(){var j=s({},l),B=D.length;return u!=null&&u.beforeAddRow?j.add=de(K().mark(function O(){var A,I,$,F,w,E=arguments;return K().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:for(A=E.length,I=new Array(A),$=0;$<A;$++)I[$]=E[$];return R.next=3,u.beforeAddRow.apply(u,I.concat([B]));case 3:if(F=R.sent,!F){R.next=8;break}return w=l.add.apply(l,I),y==null||y.apply(void 0,I.concat([B+1])),R.abrupt("return",w);case 8:return R.abrupt("return",!1);case 9:case"end":return R.stop()}},O)})):j.add=de(K().mark(function O(){var A,I,$,F,w=arguments;return K().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:for(A=w.length,I=new Array(A),$=0;$<A;$++)I[$]=w[$];return F=l.add.apply(l,I),y==null||y.apply(void 0,I.concat([B+1])),x.abrupt("return",F);case 4:case"end":return x.stop()}},O)})),u!=null&&u.beforeRemoveRow?j.remove=de(K().mark(function O(){var A,I,$,F,w,E=arguments;return K().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:for(A=E.length,I=new Array(A),$=0;$<A;$++)I[$]=E[$];return R.next=3,u.beforeRemoveRow.apply(u,I.concat([B]));case 3:if(F=R.sent,!F){R.next=8;break}return w=l.remove.apply(l,I),m==null||m.apply(void 0,I.concat([B-1])),R.abrupt("return",w);case 8:return R.abrupt("return",!1);case 9:case"end":return R.stop()}},O)})):j.remove=de(K().mark(function O(){var A,I,$,F,w=arguments;return K().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:for(A=w.length,I=new Array(A),$=0;$<A;$++)I[$]=w[$];return F=l.remove.apply(l,I),m==null||m.apply(void 0,I.concat([B-1])),x.abrupt("return",F);case 4:case"end":return x.stop()}},O)})),j},[l,u==null?void 0:u.beforeAddRow,u==null?void 0:u.beforeRemoveRow,y,m,D.length]),z=c.useMemo(function(){if(t===!1||D.length===g)return null;var j=t||{},B=j.position,O=B===void 0?"bottom":B,A=j.creatorButtonText,I=A===void 0?r.getMessage("editableTable.action.add","添加一行数据"):A;return C(Ie,s(s({className:"".concat(a,"-creator-button-").concat(O," ").concat(_),type:"dashed",loading:T,block:!0,icon:C(An,{})},De(t||{},["position","creatorButtonText"])),{},{onClick:function(){var $=de(K().mark(function w(){var E;return K().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return U(!0),E=D.length,O==="top"&&(E=0),R.next=5,L.add(Vr(o)||{},E);case 5:U(!1);case 6:case"end":return R.stop()}},w)}));function F(){return $.apply(this,arguments)}return F}(),children:I}))},[t,D.length,g,r,a,_,T,L,o]),G=s({width:"max-content",maxWidth:"100%",minWidth:"100%"},h);return le("div",{style:G,className:v,children:[t!==!1&&(t==null?void 0:t.position)==="top"&&z,D.map(function(j,B){return c.createElement(Bt,s(s({},e),{},{key:j.uuid,field:j,index:B,action:L,count:D.length}),i)}),f&&f(L,d),t!==!1&&(t==null?void 0:t.position)!=="top"&&z]})},jt=function(e){var r,t;return t={},M(t,"".concat(e.antCls,"-form:not(").concat(e.antCls,"-form-horizontal)"),M({},e.componentCls,M({},"&-item:not(".concat(e.componentCls,"-item-show-label)"),M({},"".concat(e.antCls,"-form-item-label"),{display:"none"})))),M(t,e.componentCls,(r={maxWidth:"100%","&-item":{"&&-show-label":M({},"".concat(e.antCls,"-form-item-label"),{display:"inline-block"}),"&:first-of-type":{"div:first-of-type":M({},"".concat(e.antCls,"-form-item"),M({},"".concat(e.antCls,"-form-item-label"),{display:"inline-block"}))}},"&-action":{display:"flex",height:"32px",marginBlockEnd:"24px",lineHeight:"32px"},"&-action-icon":{marginInlineStart:8,cursor:"pointer",transition:"color 0.3s ease-in-out","&:hover":{color:e.colorPrimaryTextHover}}},M(r,"".concat(e.proComponentsCls,"-card ").concat(e.proComponentsCls,"-card-extra"),M({},e.componentCls,{"&-action":{marginBlockEnd:0}})),M(r,"&-creator-button-top",{marginBlockEnd:24}),r)),t};function Wt(n){return Fe("ProFormList",function(e){var r=s(s({},e),{},{componentCls:".".concat(n)});return[jt(r)]})}var Ut=["actionRender","creatorButtonProps","label","alwaysShowItemLabel","tooltip","creatorRecord","itemRender","rules","itemContainerRender","fieldExtraRender","copyIconProps","children","deleteIconProps","actionRef","style","prefixCls","actionGuard","min","max","colProps","rowProps","onAfterAdd","onAfterRemove","isValidateList","emptyListMessage"],_e=k.createContext({});function ua(n){var e=c.useRef(),r=c.useContext(ve.ConfigContext),t=c.useContext(_e),a=r.getPrefixCls("pro-form-list"),i=Oe(),o=n.actionRender,l=n.creatorButtonProps,p=n.label,u=n.alwaysShowItemLabel,g=n.tooltip,f=n.creatorRecord,d=n.itemRender,v=n.rules,h=n.itemContainerRender,y=n.fieldExtraRender,m=n.copyIconProps,b=m===void 0?{Icon:Ir,tooltipText:i.getMessage("copyThisLine","复制此行")}:m,_=n.children,S=n.deleteIconProps,P=S===void 0?{Icon:$r,tooltipText:i.getMessage("deleteThisLine","删除此行")}:S,N=n.actionRef,T=n.style,U=n.prefixCls,D=n.actionGuard,L=n.min,z=n.max,G=n.colProps,j=n.rowProps,B=n.onAfterAdd,O=n.onAfterRemove,A=n.isValidateList,I=A===void 0?!1:A,$=n.emptyListMessage,F=$===void 0?"列表不能为空":$,w=ce(n,Ut),E=or({colProps:G,rowProps:j}),x=E.ColWrapper,R=E.RowWrapper,W=c.useContext(Er),q=c.useMemo(function(){return t.name===void 0?[w.name].flat(1):[t.name,w.name].flat(1)},[t.name,w.name]);c.useImperativeHandle(N,function(){return s(s({},e.current),{},{get:function(se){return W.formRef.current.getFieldValue([].concat(ze(q),[se]))},getList:function(){return W.formRef.current.getFieldValue(ze(q))}})},[q,W.formRef]),c.useEffect(function(){Ve.noteOnce(!!W.formRef,"ProFormList 必须要放到 ProForm 中,否则会造成行为异常。"),Ve.noteOnce(!!W.formRef,"Proformlist must be placed in ProForm, otherwise it will cause abnormal behavior.")},[W.formRef]);var Q=Wt(a),ne=Q.wrapSSR,we=Q.hashId;return W.formRef?ne(C(x,{children:C("div",{className:Pe(a,we),style:T,children:C(pe.Item,s(s({label:p,prefixCls:U,tooltip:g,style:T,required:v==null?void 0:v.some(function(ue){return ue.required})},w),{},{name:I?q:void 0,rules:I?[{validator:function(se,oe){return!oe||oe.length===0?Promise.reject(new Error(F)):Promise.resolve()},required:!0}]:void 0,children:C(pe.List,s(s({rules:v},w),{},{name:q,children:function(se,oe,he){return e.current=oe,le(R,{children:[C(Lt,{name:q,originName:w.name,copyIconProps:b,deleteIconProps:P,formInstance:W.formRef.current,prefixCls:a,meta:he,fields:se,itemContainerRender:h,itemRender:d,fieldExtraRender:y,creatorButtonProps:l,creatorRecord:f,actionRender:o,action:oe,actionGuard:D,alwaysShowItemLabel:u,min:L,max:z,count:se.length,onAfterAdd:function(V,J,ee){I&&W.formRef.current.validateFields([q]),B==null||B(V,J,ee)},onAfterRemove:function(V,J){I&&J===0&&W.formRef.current.validateFields([q]),O==null||O(V,J)},children:_}),C(pe.ErrorList,{errors:he.errors})]})}}))}))})})):null}var qt=["children","onChange","onBlur","ignoreFormItem","valuePropName"],Yt=["children","addonAfter","addonBefore","valuePropName","convertValue"],zt=["valueType","transform","dataFormat","ignoreFormItem","lightProps","children"],Ht=k.createContext({}),kt=function(e){var r=e.children,t=e.onChange,a=e.onBlur;e.ignoreFormItem;var i=e.valuePropName,o=i===void 0?"value":i,l=ce(e,qt),p=c.useCallback(function(){for(var d,v,h,y,m,b,_=arguments.length,S=new Array(_),P=0;P<_;P++)S[P]=arguments[P];t==null||t.apply(void 0,S),(r==null||(d=r.type)===null||d===void 0?void 0:d.displayName)==="ProFormComponent"&&k.isValidElement(r)&&(r==null||(v=r.props)===null||v===void 0||(h=v.onChange)===null||h===void 0||h.call.apply(h,[v].concat(S)),r==null||(y=r.props)===null||y===void 0||(m=y.fieldProps)===null||m===void 0||(b=m.onChange)===null||b===void 0||b.call.apply(b,[m].concat(S)))},[r,t]),u=c.useCallback(function(){var d,v,h,y,m,b;if((r==null||(d=r.type)===null||d===void 0?void 0:d.displayName)==="ProFormComponent"&&k.isValidElement(r)){for(var _=arguments.length,S=new Array(_),P=0;P<_;P++)S[P]=arguments[P];a==null||a.apply(void 0,S),r==null||(v=r.props)===null||v===void 0||(h=v.onBlur)===null||h===void 0||h.call.apply(h,[v].concat(S)),r==null||(y=r.props)===null||y===void 0||(m=y.fieldProps)===null||m===void 0||(b=m.onBlur)===null||b===void 0||b.call.apply(b,[m].concat(S))}},[r,a]),g=c.useMemo(function(){var d,v;if((r==null||(d=r.type)===null||d===void 0?void 0:d.displayName)==="ProFormComponent"&&k.isValidElement(r))return ke(s(s(M({id:l.id},o,e[o]),(r==null||(v=r.props)===null||v===void 0?void 0:v.fieldProps)||{}),{},{onBlur:u,onChange:p}))},[r,e,u,p,l.id,o]),f=c.useMemo(function(){if(!g&&k.isValidElement(r))return function(){for(var d,v,h=arguments.length,y=new Array(h),m=0;m<h;m++)y[m]=arguments[m];t==null||t.apply(void 0,y),r==null||(d=r.props)===null||d===void 0||(v=d.onChange)===null||v===void 0||v.call.apply(v,[d].concat(y))}},[g,r,t]);return k.isValidElement(r)?k.cloneElement(r,ke(s(s(s({},l),{},M({},o,e[o]),r.props),{},{onChange:f,fieldProps:g}))):C(Ze,{children:r})},br=function(e){var r=e.children,t=e.addonAfter,a=e.addonBefore,i=e.valuePropName,o=e.convertValue,l=ce(e,Yt),p=c.useMemo(function(){var u=function(f){var d,v=(d=o==null?void 0:o(f,l.name))!==null&&d!==void 0?d:f;return l.getValueProps?l.getValueProps(v):M({},i||"value",v)};return!o&&!l.getValueProps&&(u=void 0),!t&&!a?C(pe.Item,s(s({},l),{},{valuePropName:i,getValueProps:u,children:r})):C(pe.Item,s(s({_internalItemRender:{mark:"pro_table_render",render:function(f,d){return le(Ze,{children:[le("div",{style:{display:"flex",alignItems:"center"},children:[a?C("div",{style:{marginInlineEnd:8},children:a}):null,d.input,t?C("div",{style:{marginInlineStart:8},children:t}):null]}),d.extra,d.errorList]})}}},l),{},{getValueProps:u,children:r}))},[t,a,r,o==null?void 0:o.toString(),l]);return C(Ht.Provider,{value:{name:l.name,label:l.label},children:p})},Gt=function(e){var r,t,a,i=c.useContext(ve.SizeContext),o=e.valueType,l=e.transform,p=e.dataFormat,u=e.ignoreFormItem,g=e.lightProps,f=g===void 0?{}:g;e.children;var d=ce(e,zt),v=c.useContext(_e),h=c.useMemo(function(){return v.name!==void 0?[v.name,e.name].flat(1):e.name},[v.name,e.name]),y=k.useContext(Xr),m=y.setFieldValueType,b=y.formItemProps;c.useEffect(function(){!m||!e.name||m([v.listName,e.name].flat(1).filter(function(U){return U!==void 0}),{valueType:o||"text",dateFormat:p,transform:l})},[v.listName,h,p,e.name,m,l,o]);var _=k.isValidElement(e.children)&&Qn(o||e.children.props.valueType),S=c.useMemo(function(){return!!(!f.light||f.customLightMode||_)},[f.customLightMode,_,f.light]);if(typeof e.children=="function"){var P;return c.createElement(br,s(s({},d),{},{name:h,key:d.proFormFieldKey||((P=d.name)===null||P===void 0?void 0:P.toString())}),e.children)}var N=C(kt,{valuePropName:e.valuePropName,children:e.children},d.proFormFieldKey||((r=d.name)===null||r===void 0?void 0:r.toString())),T=S?N:c.createElement(ta,s(s({},f),{},{key:d.proFormFieldKey||((t=d.name)===null||t===void 0?void 0:t.toString()),size:i}),N);return u?C(Ze,{children:T}):C(br,s(s(s({},b),d),{},{name:h,isListField:v.name!==void 0,children:T}),d.proFormFieldKey||((a=d.name)===null||a===void 0?void 0:a.toString()))};const sa=Gt;var Kt=function(e){var r=Oe(),t=pe.useFormInstance();if(e.render===!1)return null;var a=e.onSubmit,i=e.render,o=e.onReset,l=e.searchConfig,p=l===void 0?{}:l,u=e.submitButtonProps,g=e.resetButtonProps,f=g===void 0?{}:g,d=function(){t.submit(),a==null||a()},v=function(){t.resetFields(),o==null||o()},h=p.submitText,y=h===void 0?r.getMessage("tableForm.submit","提交"):h,m=p.resetText,b=m===void 0?r.getMessage("tableForm.reset","重置"):m,_=[];f!==!1&&_.push(c.createElement(Ie,s(s({},De(f,["preventDefault"])),{},{key:"rest",onClick:function(N){var T;f!=null&&f.preventDefault||v(),f==null||(T=f.onClick)===null||T===void 0||T.call(f,N)}}),b)),u!==!1&&_.push(c.createElement(Ie,s(s({type:"primary"},De(u||{},["preventDefault"])),{},{key:"submit",onClick:function(N){var T;u!=null&&u.preventDefault||d(),u==null||(T=u.onClick)===null||T===void 0||T.call(u,N)}}),y));var S=i?i(s(s({},e),{},{form:t,submit:d,reset:v}),_):_;return S?Array.isArray(S)?(S==null?void 0:S.length)<1?null:(S==null?void 0:S.length)===1?S[0]:C(Cn,{wrap:!0,children:S}):S:null};const Qt=Kt;var Jt=["children","contentRender","submitter","fieldProps","formItemProps","groupProps","transformKey","formRef","onInit","form","loading","formComponentType","extraUrlParams","syncToUrl","onUrlSearchChange","onReset","omitNil","isKeyPressSubmit","autoFocusFirstInput","grid","rowProps","colProps"],Xt=["extraUrlParams","syncToUrl","isKeyPressSubmit","syncToUrlAsImportant","syncToInitialValues","children","contentRender","submitter","fieldProps","formItemProps","groupProps","dateFormatter","formRef","onInit","form","formComponentType","onReset","grid","rowProps","colProps","omitNil","request","params","initialValues","formKey","readonly"],Xe=function(e,r,t){return e===!0?r:Vr(e,r,t)},Pr=function(e){return!e||Array.isArray(e)?e:[e]};function Zt(n){var e=n.children,r=n.contentRender,t=n.submitter;n.fieldProps,n.formItemProps,n.groupProps;var a=n.transformKey,i=n.formRef,o=n.onInit,l=n.form,p=n.loading;n.formComponentType;var u=n.extraUrlParams,g=u===void 0?{}:u,f=n.syncToUrl,d=n.onUrlSearchChange,v=n.onReset,h=n.omitNil,y=h===void 0?!0:h;n.isKeyPressSubmit;var m=n.autoFocusFirstInput,b=m===void 0?!0:m,_=n.grid,S=n.rowProps,P=n.colProps,N=ce(n,Jt),T=pe.useFormInstance(),U=c.useContext(ve.SizeContext),D=c.useRef(l||T),L=or({grid:_,rowProps:S}),z=L.RowWrapper,G=Dr(function(){return T}),j=c.useMemo(function(){return{getFieldsFormatValue:function(w){var E;return a((E=G())===null||E===void 0?void 0:E.getFieldsValue(w),y)},getFieldFormatValue:function(){var w,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=Pr(E);if(!x)throw new Error("nameList is require");var R=(w=G())===null||w===void 0?void 0:w.getFieldValue(x),W=x?ge({},x,R):R;return rr(a(W,y,x),x)},getFieldFormatValueObject:function(w){var E,x=Pr(w),R=(E=G())===null||E===void 0?void 0:E.getFieldValue(x),W=x?ge({},x,R):R;return a(W,y,x)},validateFieldsReturnFormatValue:function(){var F=de(K().mark(function E(x){var R,W,q;return K().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!(!Array.isArray(x)&&x)){ne.next=2;break}throw new Error("nameList must be array");case 2:return ne.next=4,(R=G())===null||R===void 0?void 0:R.validateFields(x);case 4:return W=ne.sent,q=a(W,y),ne.abrupt("return",q||{});case 7:case"end":return ne.stop()}},E)}));function w(E){return F.apply(this,arguments)}return w}(),formRef:D}},[y,a]),B=c.useMemo(function(){return k.Children.toArray(e).map(function(F,w){return w===0&&k.isValidElement(F)&&b?k.cloneElement(F,s(s({},F.props),{},{autoFocus:b})):F})},[b,e]),O=c.useMemo(function(){return typeof t=="boolean"||!t?{}:t},[t]);c.useImperativeHandle(i,function(){return s(s({},T),j)},[j,T]);var A=c.useMemo(function(){if(t!==!1)return C(Qt,s(s({},O),{},{onReset:function(){var w,E,x=a((w=D.current)===null||w===void 0?void 0:w.getFieldsValue(),y);if(O==null||(E=O.onReset)===null||E===void 0||E.call(O,x),v==null||v(x),f){var R,W=Object.keys(a((R=D.current)===null||R===void 0?void 0:R.getFieldsValue(),!1)).reduce(function(q,Q){return s(s({},q),{},M({},Q,x[Q]||void 0))},g);d(Xe(f,W,"set"))}},submitButtonProps:s({loading:p},O.submitButtonProps)}),"submitter")},[t,O,p,a,y,v,f,g,d]),I=c.useMemo(function(){var F=_?C(z,{children:B}):B;return r?r(F,A,D.current):F},[_,z,B,r,A]),$=Kn(n.initialValues);return c.useEffect(function(){if(!(f||!n.initialValues||!$||N.request)){var F=Ne(n.initialValues,$);Ve.noteOnce(F,"initialValues 只在 form 初始化时生效，如果你需要异步加载推荐使用 request，或者 initialValues ? <Form/> : null "),Ve.noteOnce(F,"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null ")}},[n.initialValues]),c.useImperativeHandle(i,function(){return s(s({},D.current),j)},[]),c.useEffect(function(){var F,w,E=a((F=D.current)===null||F===void 0||(w=F.getFieldsValue)===null||w===void 0?void 0:w.call(F,!0),y);o==null||o(E,D.current)},[]),C(Er.Provider,{value:j,children:C(ve.SizeContext.Provider,{value:N.size||U,children:le(Zr.Provider,{value:{grid:_,colProps:P},children:[N.component!==!1&&C("input",{type:"text",style:{display:"none"}}),I]})})})}var wr=0;function da(n){var e=n.extraUrlParams,r=e===void 0?{}:e,t=n.syncToUrl,a=n.isKeyPressSubmit,i=n.syncToUrlAsImportant,o=i===void 0?!1:i,l=n.syncToInitialValues,p=l===void 0?!0:l;n.children,n.contentRender,n.submitter;var u=n.fieldProps,g=n.formItemProps,f=n.groupProps,d=n.dateFormatter,v=d===void 0?"string":d,h=n.formRef;n.onInit;var y=n.form,m=n.formComponentType;n.onReset,n.grid,n.rowProps,n.colProps;var b=n.omitNil,_=b===void 0?!0:b,S=n.request,P=n.params,N=n.initialValues,T=n.formKey,U=T===void 0?wr:T;n.readonly;var D=ce(n,Xt),L=c.useRef({}),z=Qr(!1),G=ae(z,2),j=G[0],B=G[1],O=It({},{disabled:!t}),A=ae(O,2),I=A[0],$=A[1],F=c.useRef(Br());c.useEffect(function(){wr+=0},[]);var w=Gn({request:S,params:P,proFieldKey:U}),E=ae(w,1),x=E[0],R=c.useContext(ve.ConfigContext),W=R.getPrefixCls,q=W("pro-form"),Q=Fe("ProForm",function(X){return M({},".".concat(q),M({"*":{boxSizing:"border-box"}},"> div:not(".concat(X.proComponentsCls,"-form-light-filter)"),{".pro-field":{maxWidth:"100%","&-xs":{width:104},"&-s":{width:216},"&-sm":{width:216},"&-m":{width:328},"&-md":{width:328},"&-l":{width:440},"&-lg":{width:440},"&-xl":{width:552}}}))}),ne=Q.wrapSSR,we=Q.hashId,ue=c.useState(function(){return t?Xe(t,I,"get"):{}}),se=ae(ue,2),oe=se[0],he=se[1],ye=c.useRef({}),V=c.useRef({}),J=c.useCallback(function(X,H,Y){return ut(Hn(X,v,V.current,H,Y),ye.current,H)},[v]);c.useEffect(function(){p||he({})},[p]),c.useEffect(function(){t&&$(s(s({},I),r))},[r,t]);var ee=c.useMemo(function(){if(!(typeof window>"u")&&m&&["DrawerForm"].includes(m))return function(X){return X.parentNode||document.body}},[m]),Ce=Dr(de(K().mark(function X(){var H,Y,Z,ie,be,me;return K().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(D.onFinish){te.next=2;break}return te.abrupt("return");case 2:if(!j){te.next=4;break}return te.abrupt("return");case 4:return B(!0),te.prev=5,Z=L==null||(H=L.current)===null||H===void 0||(Y=H.getFieldsFormatValue)===null||Y===void 0?void 0:Y.call(H),te.next=9,D.onFinish(Z);case 9:t&&(me=Object.keys(L==null||(ie=L.current)===null||ie===void 0||(be=ie.getFieldsFormatValue)===null||be===void 0?void 0:be.call(ie,void 0,!1)).reduce(function(Re,ir){var je;return s(s({},Re),{},M({},ir,(je=Z[ir])!==null&&je!==void 0?je:void 0))},r),Object.keys(I).forEach(function(Re){me[Re]!==!1&&me[Re]!==0&&!me[Re]&&(me[Re]=void 0)}),$(Xe(t,me,"set"))),B(!1),te.next=16;break;case 13:te.prev=13,te.t0=te.catch(5),B(!1);case 16:case"end":return te.stop()}},X,null,[[5,13]])})));return c.useImperativeHandle(h,function(){return L.current},[!x]),!x&&n.request?C("div",{style:{paddingTop:50,paddingBottom:50,textAlign:"center"},children:C(He,{})}):ne(C(Mt.Provider,{value:{mode:n.readonly?"read":"edit"},children:C(Pn,{needDeps:!0,children:C(Xr.Provider,{value:{formRef:L,fieldProps:u,formItemProps:g,groupProps:f,formComponentType:m,getPopupContainer:ee,formKey:F.current,setFieldValueType:function(H,Y){var Z=Y.valueType,ie=Z===void 0?"text":Z,be=Y.dateFormat,me=Y.transform;Array.isArray(H)&&(ye.current=ge(ye.current,H,me),V.current=ge(V.current,H,{valueType:ie,dateFormat:be}))}},children:C(_e.Provider,{value:{},children:C(pe,s(s({onKeyPress:function(H){if(a&&H.key==="Enter"){var Y;(Y=L.current)===null||Y===void 0||Y.submit()}},autoComplete:"off",form:y},De(D,["labelWidth","autoFocusFirstInput"])),{},{initialValues:o?s(s(s({},N),x),oe):s(s(s({},oe),N),x),onValuesChange:function(H,Y){var Z;D==null||(Z=D.onValuesChange)===null||Z===void 0||Z.call(D,J(H,!!_),J(Y,!!_))},className:Pe(n.className,q,we),onFinish:Ce,children:C(Zt,s(s({transformKey:J,autoComplete:"off",loading:j,onUrlSearchChange:$},n),{},{formRef:L,initialValues:s(s({},N),x)}))}))})})})}))}var ea=function(e){var r;return r={},M(r,"".concat(e.componentCls,"-collapse-label"),{paddingInline:1,paddingBlock:1}),M(r,"".concat(e.componentCls,"-container"),M({},"".concat(e.antCls,"-form-item"),{marginBlockEnd:0})),r};function ra(n){return Fe("LightWrapper",function(e){var r=s(s({},e),{},{componentCls:".".concat(n)});return[ea(r)]})}var na=["label","size","disabled","onChange","className","style","children","valuePropName","placeholder","labelFormatter","bordered","footerRender","allowClear","otherFieldProps","valueType","placement"],ta=function(e){var r,t=e.label,a=e.size,i=e.disabled,o=e.onChange,l=e.className,p=e.style,u=e.children,g=e.valuePropName,f=e.placeholder,d=e.labelFormatter,v=e.bordered,h=e.footerRender,y=e.allowClear,m=e.otherFieldProps,b=e.valueType,_=e.placement,S=ce(e,na),P=c.useContext(ve.ConfigContext),N=P.getPrefixCls,T=N("pro-field-light-wrapper"),U=ra(T),D=U.wrapSSR,L=U.hashId,z=c.useState(e[g]),G=ae(z,2),j=G[0],B=G[1],O=Qr(!1),A=ae(O,2),I=A[0],$=A[1],F=function(){for(var R,W=arguments.length,q=new Array(W),Q=0;Q<W;Q++)q[Q]=arguments[Q];m==null||(R=m.onChange)===null||R===void 0||R.call.apply(R,[m].concat(q)),o==null||o.apply(void 0,q)},w=e[g],E=c.useMemo(function(){var x;return!(b==null||(x=b.toLowerCase())===null||x===void 0)&&x.endsWith("range")&&!d?kn(w,Mr[b]||"YYYY-MM-DD"):w},[w,b,d]);return D(C(Wn,{disabled:i,open:I,onOpenChange:$,placement:_,label:C(On,{ellipsis:!0,size:a,onClear:function(){F==null||F(),B(void 0)},bordered:v,style:p,className:l,label:t,placeholder:f,value:E,disabled:i,expanded:I,formatter:d,allowClear:y}),footer:{onClear:function(){return B(void 0)},onConfirm:function(){F==null||F(j),$(!1)}},footerRender:h,children:C("div",{className:Pe("".concat(T,"-container"),L,l),style:p,children:k.cloneElement(u,s(s({},S),{},(r={},M(r,g,j),M(r,"onChange",function(R){B(R!=null&&R.target?R.target.value:R)}),r),u.props))})}))};export{da as B,Fn as D,Mt as E,Xr as F,Er as P,Qr as _,Dr as a,rr as b,ge as c,kn as d,Bn as e,ke as f,Ln as g,xt as h,De as i,or as j,Wn as k,On as l,Jn as m,ua as n,jn as o,Ne as p,Ot as q,Vr as r,Me as s,sa as t,Kn as u,Br as v,Ve as w,_e as x};
